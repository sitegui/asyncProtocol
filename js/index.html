<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="aP.js"></script>
<script src="Data.js"></script>
<script src="DataArray.js"></script>
<script src="DataBuffer.js"></script>
<script src="Exception.js"></script>
<script src="inflateData.js"></script>
<script src="inflateFormat.js"></script>
<script src="Token.js"></script>
<script>
var E_DIV_ZERO = aP.registerException(1)

var CC_ADD = aP.registerClientCall(1, "ii", "i")
var CC_DIV = aP.registerClientCall(2, "uu", "f", [E_DIV_ZERO])
var CC_CONCAT = aP.registerClientCall(3, "(s)", "s")

var conn = new aP("ws://localhost:8002")

conn.onopen = function () {
	console.log("Connection opened")
}

conn.onclose = function () {
	console.log("Connection closed")
}

function onreturn(data) {
	console.info(data)
}

function onexception(type, data) {
	console.error(type, data)
}

function add(a, b) {
	conn.sendCall(CC_ADD, new aP.Data().addInt(a).addInt(b), onreturn, onexception)
}

function div(a, b) {
	conn.sendCall(CC_DIV, new aP.Data().addUint(a).addUint(b), onreturn, onexception)
}

function concat() {
	conn.sendCall(CC_CONCAT, new aP.Data().addStringArray(arguments), onreturn, onexception)
}
</script>
</head>

<body>
</body>
</html>
